<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SafeGuard.Mobile.RequestsPage"
             BackgroundColor="#121212"
             Title="Gelen Ä°stekler">

    <Grid>
        <CollectionView x:Name="RequestsCollection" Margin="0,10,0,0">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Border StrokeThickness="0" BackgroundColor="#1E1E1E" Padding="15" Margin="15,5">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>

                        <Grid ColumnDefinitions="Auto, *, Auto, Auto" ColumnSpacing="15">

                            <Border Grid.Column="0" HeightRequest="50" WidthRequest="50" 
                    StrokeShape="RoundRectangle 25" BackgroundColor="#333">
                                <Image HorizontalOptions="Center" VerticalOptions="Center">
                                    <Image.Source>
                                        <FontImageSource Glyph="ðŸ‘¤" Color="White" Size="26"/>
                                    </Image.Source>
                                </Image>
                            </Border>

                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">

                                <Label Text="{Binding SenderName}" TextColor="White" FontSize="16" FontAttributes="Bold"/>

                                <Label Text="{Binding SenderPhone}" TextColor="#B0B0B0" FontSize="13" FontAttributes="None"/>

                                <Label Text="Sizi yakÄ±nlarÄ±na eklemek istiyor" TextColor="Gray" FontSize="11"/>
                            </VerticalStackLayout>

                            <Button Grid.Column="2" Text="âœ•" TextColor="White" BackgroundColor="#FF3B30" 
                    HeightRequest="40" WidthRequest="40" CornerRadius="20" Padding="0"
                    Clicked="OnRejectClicked" CommandParameter="{Binding Id}"/>

                            <Button Grid.Column="3" Text="âœ“" TextColor="White" BackgroundColor="#34C759" 
                    HeightRequest="40" WidthRequest="40" CornerRadius="20" Padding="0"
                    Clicked="OnAcceptClicked" CommandParameter="{Binding Id}"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Label x:Name="EmptyLabel" Text="Bekleyen istek yok." TextColor="Gray" 
               HorizontalOptions="Center" VerticalOptions="Center" IsVisible="False"/>

        <ActivityIndicator x:Name="LoadingSpinner" IsRunning="False" Color="#2196F3" 
                           HorizontalOptions="Center" VerticalOptions="Center"/>
    </Grid>
</ContentPage>